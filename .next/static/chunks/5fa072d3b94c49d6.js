(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,72530,e=>{"use strict";var t=e.i(66869),a=e.i(27646),l=e.i(52734),r=e.i(36929);function s(){let[e,l]=(0,a.useState)(null),[r,s]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[d,n]=(0,a.useState)(""),[u,c]=(0,a.useState)(!1),[b,g]=(0,a.useState)(""),m=async t=>{if(t.preventDefault(),!e)return void g("Please select a file");c(!0),g("");try{let t=new FormData;if(t.append("file",e),t.append("title",r),t.append("description",o),t.append("youtube_id",d),(await fetch("/api/upload",{method:"POST",body:t})).ok){g("Upload successful!"),l(null),s(""),i(""),n("");let e=document.getElementById("file-upload");e&&(e.value="")}else g("Upload failed. Please try again.")}catch(e){console.error("Upload error:",e),g("Upload failed. Please try again.")}finally{c(!1)}};return(0,t.jsxs)("form",{onSubmit:m,className:"max-w-2xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"file-upload",className:"block text-sm font-medium mb-2",children:"File"}),(0,t.jsx)("input",{id:"file-upload",type:"file",onChange:e=>l(e.target.files?.[0]||null),accept:"image/*,video/*",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium mb-2",children:"Title"}),(0,t.jsx)("input",{id:"title",type:"text",value:r,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-white dark:bg-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium mb-2",children:"Description"}),(0,t.jsx)("textarea",{id:"description",value:o,onChange:e=>i(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-white dark:bg-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"youtube-id",className:"block text-sm font-medium mb-2",children:"YouTube Video ID (optional)"}),(0,t.jsx)("input",{id:"youtube-id",type:"text",value:d,onChange:e=>n(e.target.value),placeholder:"e.g., dQw4w9WgXcQ",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-white dark:bg-gray-800"})]}),(0,t.jsx)("button",{type:"submit",disabled:u,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg disabled:opacity-50 transition-colors",children:u?"Uploading...":"Upload"}),b&&(0,t.jsx)("div",{className:`text-center ${b.includes("successful")?"text-green-600":"text-red-600"}`,children:b})]})}function o(){let[e,o]=(0,a.useState)(!0),[i,d]=(0,a.useState)(!1),n=(0,r.useRouter)();(0,a.useEffect)(()=>{(async()=>{let{data:{user:e}}=await l.supabase.auth.getUser();e?d(!0):n.push("/admin"),o(!1)})()},[n]);let u=async()=>{await l.supabase.auth.signOut(),n.push("/admin")};return e?(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-20 text-center",children:"Loading..."}):i?(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Upload Media"}),(0,t.jsx)("button",{onClick:u,className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Logout"})]}),(0,t.jsx)(s,{})]}):null}e.s(["default",()=>o],72530)}]);