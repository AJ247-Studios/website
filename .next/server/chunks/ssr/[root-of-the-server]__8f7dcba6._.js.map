{"version":3,"sources":["../../../../../../../../Desktop/Jo%27s%20stash/aj247-site/website/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../../../Desktop/Jo%27s%20stash/aj247-site/website/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../../../Desktop/Jo%27s%20stash/aj247-site/website/app/admin/upload/page.tsx","../../../../../../../../Desktop/Jo%27s%20stash/aj247-site/website/components/UploadForm.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { supabase } from \"@/lib/supabaseClient\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport UploadForm from \"@/components/UploadForm\";\r\n\r\nexport default function UploadPage() {\r\n  const [loading, setLoading] = useState(true);\r\n  const [authenticated, setAuthenticated] = useState(false);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      const {\r\n        data: { user },\r\n      } = await supabase.auth.getUser();\r\n\r\n      if (!user) {\r\n        router.push(\"/admin\");\r\n      } else {\r\n        setAuthenticated(true);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    checkAuth();\r\n  }, [router]);\r\n\r\n  const handleLogout = async () => {\r\n    await supabase.auth.signOut();\r\n    router.push(\"/admin\");\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-7xl mx-auto px-4 py-20 text-center\">\r\n        Loading...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!authenticated) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-7xl mx-auto px-4 py-12\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-3xl font-bold\">Upload Media</h1>\r\n        <button\r\n          onClick={handleLogout}\r\n          className=\"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200\"\r\n        >\r\n          Logout\r\n        </button>\r\n      </div>\r\n      <UploadForm />\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nexport default function UploadForm() {\r\n  const [file, setFile] = useState<File | null>(null);\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [youtubeId, setYoutubeId] = useState(\"\");\r\n  const [uploading, setUploading] = useState(false);\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!file) {\r\n      setMessage(\"Please select a file\");\r\n      return;\r\n    }\r\n\r\n    setUploading(true);\r\n    setMessage(\"\");\r\n\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"file\", file);\r\n      formData.append(\"title\", title);\r\n      formData.append(\"description\", description);\r\n      formData.append(\"youtube_id\", youtubeId);\r\n\r\n      const response = await fetch(\"/api/upload\", {\r\n        method: \"POST\",\r\n        body: formData,\r\n      });\r\n\r\n      if (response.ok) {\r\n        setMessage(\"Upload successful!\");\r\n        setFile(null);\r\n        setTitle(\"\");\r\n        setDescription(\"\");\r\n        setYoutubeId(\"\");\r\n        // Reset file input\r\n        const fileInput = document.getElementById(\r\n          \"file-upload\"\r\n        ) as HTMLInputElement;\r\n        if (fileInput) fileInput.value = \"\";\r\n      } else {\r\n        setMessage(\"Upload failed. Please try again.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Upload error:\", error);\r\n      setMessage(\"Upload failed. Please try again.\");\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"max-w-2xl mx-auto space-y-6\">\r\n      <div>\r\n        <label\r\n          htmlFor=\"file-upload\"\r\n          className=\"block text-sm font-medium mb-2\"\r\n        >\r\n          File\r\n        </label>\r\n        <input\r\n          id=\"file-upload\"\r\n          type=\"file\"\r\n          onChange={(e) => setFile(e.target.files?.[0] || null)}\r\n          accept=\"image/*,video/*\"\r\n          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600\"\r\n          required\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"title\" className=\"block text-sm font-medium mb-2\">\r\n          Title\r\n        </label>\r\n        <input\r\n          id=\"title\"\r\n          type=\"text\"\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-white dark:bg-gray-800\"\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label\r\n          htmlFor=\"description\"\r\n          className=\"block text-sm font-medium mb-2\"\r\n        >\r\n          Description\r\n        </label>\r\n        <textarea\r\n          id=\"description\"\r\n          value={description}\r\n          onChange={(e) => setDescription(e.target.value)}\r\n          rows={3}\r\n          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-white dark:bg-gray-800\"\r\n        />\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"youtube-id\" className=\"block text-sm font-medium mb-2\">\r\n          YouTube Video ID (optional)\r\n        </label>\r\n        <input\r\n          id=\"youtube-id\"\r\n          type=\"text\"\r\n          value={youtubeId}\r\n          onChange={(e) => setYoutubeId(e.target.value)}\r\n          placeholder=\"e.g., dQw4w9WgXcQ\"\r\n          className=\"w-full px-3 py-2 border border-gray-300 dark:border-gray-700 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-600 bg-white dark:bg-gray-800\"\r\n        />\r\n      </div>\r\n\r\n      <button\r\n        type=\"submit\"\r\n        disabled={uploading}\r\n        className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg disabled:opacity-50 transition-colors\"\r\n      >\r\n        {uploading ? \"Uploading...\" : \"Upload\"}\r\n      </button>\r\n\r\n      {message && (\r\n        <div\r\n          className={`text-center ${\r\n            message.includes(\"successful\")\r\n              ? \"text-green-600\"\r\n              : \"text-red-600\"\r\n          }`}\r\n        >\r\n          {message}\r\n        </div>\r\n      )}\r\n    </form>\r\n  );\r\n}\r\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}