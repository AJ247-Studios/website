{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/joban/Desktop/Jo%27s%20stash/aj247-site/website/components/ChatWidget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useRef, useEffect } from \"react\";\r\n\r\ninterface Message {\r\n  role: \"user\" | \"assistant\";\r\n  content: string;\r\n}\r\n\r\nexport default function ChatWidget() {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [messages, setMessages] = useState<Message[]>([\r\n    {\r\n      role: \"assistant\",\r\n      content: \"Hi! I'm your AI assistant for AJ247 Studios. How can I help you today?\",\r\n    },\r\n  ]);\r\n  const [input, setInput] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const messagesEndRef = useRef<HTMLDivElement>(null);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && inputRef.current) {\r\n      inputRef.current.focus();\r\n    }\r\n  }, [isOpen]);\r\n\r\n  const sendMessage = async () => {\r\n    if (!input.trim() || loading) return;\r\n\r\n    const userMessage: Message = { role: \"user\", content: input.trim() };\r\n    setMessages((prev) => [...prev, userMessage]);\r\n    setInput(\"\");\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/chat\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ messages: [...messages, userMessage] }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Failed to get response\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      const assistantMessage: Message = {\r\n        role: \"assistant\",\r\n        content: data.message || \"I apologize, but I couldn't generate a response.\",\r\n      };\r\n      setMessages((prev) => [...prev, assistantMessage]);\r\n    } catch (error) {\r\n      console.error(\"Chat error:\", error);\r\n      setMessages((prev) => [\r\n        ...prev,\r\n        {\r\n          role: \"assistant\",\r\n          content: \"Sorry, I'm having trouble connecting right now. Please try again later.\",\r\n        },\r\n      ]);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (e.key === \"Enter\" && !e.shiftKey) {\r\n      e.preventDefault();\r\n      sendMessage();\r\n    }\r\n  };\r\n\r\n  const clearChat = () => {\r\n    setMessages([\r\n      {\r\n        role: \"assistant\",\r\n        content: \"Hi! I'm your AI assistant for AJ247 Studios. How can I help you today?\",\r\n      },\r\n    ]);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Chat Button */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"fixed bottom-6 right-6 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-full w-16 h-16 flex items-center justify-center shadow-2xl transition-all duration-300 hover:scale-110 z-50\"\r\n        aria-label=\"Toggle chat\"\r\n      >\r\n        {isOpen ? (\r\n          <svg\r\n            className=\"w-6 h-6\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M6 18L18 6M6 6l12 12\"\r\n            />\r\n          </svg>\r\n        ) : (\r\n          <svg\r\n            className=\"w-7 h-7\"\r\n            fill=\"none\"\r\n            stroke=\"currentColor\"\r\n            viewBox=\"0 0 24 24\"\r\n          >\r\n            <path\r\n              strokeLinecap=\"round\"\r\n              strokeLinejoin=\"round\"\r\n              strokeWidth={2}\r\n              d=\"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z\"\r\n            />\r\n          </svg>\r\n        )}\r\n      </button>\r\n\r\n      {/* Chat Panel */}\r\n      {isOpen && (\r\n        <div className=\"fixed bottom-24 right-6 w-96 h-[32rem] bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-2xl shadow-2xl flex flex-col z-50 animate-in slide-in-from-bottom-4 duration-300\">\r\n          {/* Header */}\r\n          <div className=\"p-4 border-b border-gray-200 dark:border-gray-700 bg-gradient-to-r from-blue-600 to-blue-700 rounded-t-2xl\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-10 h-10 bg-white rounded-full flex items-center justify-center\">\r\n                  <svg\r\n                    className=\"w-6 h-6 text-blue-600\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"font-semibold text-white\">AI Assistant</h3>\r\n                  <p className=\"text-xs text-blue-100\">Always here to help</p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={clearChat}\r\n                className=\"text-white hover:bg-white/20 p-2 rounded-lg transition-colors\"\r\n                title=\"Clear chat\"\r\n              >\r\n                <svg\r\n                  className=\"w-5 h-5\"\r\n                  fill=\"none\"\r\n                  stroke=\"currentColor\"\r\n                  viewBox=\"0 0 24 24\"\r\n                >\r\n                  <path\r\n                    strokeLinecap=\"round\"\r\n                    strokeLinejoin=\"round\"\r\n                    strokeWidth={2}\r\n                    d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"\r\n                  />\r\n                </svg>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Messages */}\r\n          <div className=\"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 dark:bg-gray-950\">\r\n            {messages.map((msg, idx) => (\r\n              <div\r\n                key={idx}\r\n                className={`flex ${\r\n                  msg.role === \"user\" ? \"justify-end\" : \"justify-start\"\r\n                } animate-in fade-in slide-in-from-bottom-2 duration-300`}\r\n              >\r\n                <div\r\n                  className={`max-w-[80%] px-4 py-3 rounded-2xl ${\r\n                    msg.role === \"user\"\r\n                      ? \"bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-br-sm\"\r\n                      : \"bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 border border-gray-200 dark:border-gray-700 rounded-bl-sm\"\r\n                  } shadow-sm`}\r\n                >\r\n                  <p className=\"text-sm whitespace-pre-wrap break-words\">\r\n                    {msg.content}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            ))}\r\n            {loading && (\r\n              <div className=\"flex justify-start animate-in fade-in slide-in-from-bottom-2 duration-300\">\r\n                <div className=\"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 px-4 py-3 rounded-2xl rounded-bl-sm shadow-sm\">\r\n                  <div className=\"flex gap-1\">\r\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce\"></div>\r\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-100\"></div>\r\n                    <div className=\"w-2 h-2 bg-gray-400 rounded-full animate-bounce delay-200\"></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            <div ref={messagesEndRef} />\r\n          </div>\r\n\r\n          {/* Input */}\r\n          <div className=\"p-4 border-t border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900\">\r\n            <div className=\"flex gap-2\">\r\n              <input\r\n                ref={inputRef}\r\n                type=\"text\"\r\n                value={input}\r\n                onChange={(e) => setInput(e.target.value)}\r\n                onKeyPress={handleKeyPress}\r\n                placeholder=\"Type your message...\"\r\n                className=\"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-600 focus:border-transparent bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 transition-shadow\"\r\n                disabled={loading}\r\n              />\r\n              <button\r\n                onClick={sendMessage}\r\n                disabled={loading || !input.trim()}\r\n                className=\"bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white px-5 py-3 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-lg flex items-center justify-center\"\r\n                title=\"Send message\"\r\n              >\r\n                {loading ? (\r\n                  <svg\r\n                    className=\"animate-spin h-5 w-5\"\r\n                    fill=\"none\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <circle\r\n                      className=\"opacity-25\"\r\n                      cx=\"12\"\r\n                      cy=\"12\"\r\n                      r=\"10\"\r\n                      stroke=\"currentColor\"\r\n                      strokeWidth=\"4\"\r\n                    ></circle>\r\n                    <path\r\n                      className=\"opacity-75\"\r\n                      fill=\"currentColor\"\r\n                      d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\r\n                    ></path>\r\n                  </svg>\r\n                ) : (\r\n                  <svg\r\n                    className=\"w-5 h-5\"\r\n                    fill=\"none\"\r\n                    stroke=\"currentColor\"\r\n                    viewBox=\"0 0 24 24\"\r\n                  >\r\n                    <path\r\n                      strokeLinecap=\"round\"\r\n                      strokeLinejoin=\"round\"\r\n                      strokeWidth={2}\r\n                      d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"\r\n                    />\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-2 text-center\">\r\n              Powered by OpenAI GPT-4o-mini\r\n            </p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <style jsx>{`\r\n        @keyframes bounce {\r\n          0%, 100% { transform: translateY(0); }\r\n          50% { transform: translateY(-4px); }\r\n        }\r\n        .animate-bounce {\r\n          animation: bounce 1s infinite;\r\n        }\r\n        .delay-100 {\r\n          animation-delay: 0.1s;\r\n        }\r\n        .delay-200 {\r\n          animation-delay: 0.2s;\r\n        }\r\n      `}</style>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}